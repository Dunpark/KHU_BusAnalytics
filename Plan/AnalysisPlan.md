# 📊 서울시 상권 분석 프로젝트 - 분석 절차 계획서

## 프로젝트 정보
- **과목**: 경희대학교 비즈니스 애널리틱스
- **프로젝트명**: Data-Driven Decision Project
- **주제**: 서울시 상권 유형화 및 업종별 최적 입지 조건 분석
- **데이터**: 서울시 상권분석서비스 4개년(2021-2024) 통합 데이터

---

## 1. 프로젝트 개요 및 연구 질문 정의

### 1.1 비즈니스 문제 정의 (Business Understanding)

#### 📌 핵심 비즈니스 질문
> "서울시 상권의 특성을 유형화하고, 각 업종에 최적화된 입지 조건은 무엇인가?"

#### 🎯 세부 연구 질문
1. **상권 유형화**: 서울시 상권을 데이터 기반으로 어떻게 유형화할 수 있는가?
2. **성장/쇠퇴 예측**: 상권의 성장 또는 쇠퇴를 예측할 수 있는 요인은 무엇인가?
3. **최적 입지 분석**: 특정 업종에 가장 적합한 상권 유형과 조건은 무엇인가?
4. **매출 영향 요인**: 상권 매출에 영향을 미치는 핵심 요인은 무엇인가?

#### 💼 비즈니스 가치 및 의사결정 지원
| 이해관계자 | 의사결정 지원 내용 |
|-----------|-------------------|
| **예비 창업자** | 업종별 최적 입지 추천, 경쟁 환경 파악 |
| **기존 사업자** | 상권 성장/쇠퇴 전망, 업종 전환 판단 근거 |
| **정책 입안자** | 쇠퇴 상권 지원 정책, 상권 활성화 전략 |
| **부동산/투자자** | 상권 가치 평가, 투자 의사결정 |

#### 🔍 이 문제가 중요한 이유 (Why do I care?)
- 서울시 자영업자 약 70만명의 생존과 직결
- 상권 쇠퇴는 지역경제 침체, 일자리 감소로 이어짐
- 데이터 기반 입지 선정으로 창업 실패율(약 60%) 감소 가능
- 정책적 상권 지원의 과학적 근거 제공

---

## 2. 데이터 이해 (Data Understanding)

### 2.1 데이터 소스
| 항목 | 내용 |
|------|------|
| **출처** | 서울열린데이터광장 - 서울시 상권분석서비스 |
| **기간** | 2021년 1분기 ~ 2024년 4분기 (4개년, 16분기) |
| **규모** | 283,552건 × 127개 변수 |
| **단위** | 상권-업종-분기 조합 |

### 2.2 데이터 구조
```
[키(Key) 변수]
├── 기준_년분기_코드: 시간 기준 (20211 = 2021년 1분기)
├── 상권_코드: 1,479개 고유 상권
├── 서비스_업종_코드: 62개 업종 분류
├── 자치구_코드: 25개 자치구
└── 행정동_코드: 세부 지역 단위

[측정 변수 카테고리]
├── 매출 관련 (48개): 당월매출, 요일별/시간대별/성별/연령별 매출
├── 인구 관련 (43개): 상주인구, 유동인구 (세분화)
├── 소득/소비 (12개): 월평균소득, 항목별 지출
├── 점포 관련 (7개): 점포수, 개업/폐업, 프랜차이즈
└── 영역 관련 (3개): 좌표, 면적
```

### 2.3 데이터 특성 요약 (EDA 결과 반영)

#### 주요 변수 분포
| 변수 | 평균 | 중앙값 | 왜도 | 비고 |
|------|-----:|------:|-----:|------|
| 당월_매출_금액 | 11.5억원 | 2.3억원 | 69.8 | 극단적 우편향 → 로그 변환 필수 |
| 점포_수 | 15.4개 | 7개 | 91.0 | 극단적 우편향 → 로그 변환 |
| 총_유동인구_수 | 137만명 | 106만명 | 2.2 | 약한 우편향 |
| 월_평균_소득 | 289만원 | 266만원 | 1.8 | 약한 우편향 |

#### 상권 유형별 특성
| 상권 유형 | 비중 | 평균 매출 | 평균 점포 | 특성 |
|----------|:----:|----------:|----------:|------|
| 골목상권 | 48.9% | 4.1억원 | 8개 | 생활밀착형, 소규모 |
| 발달상권 | 35.7% | 20.6억원 | 23개 | 상업 집중, 중규모 |
| 전통시장 | 14.2% | 11.0억원 | 12개 | 재래시장, 특수 업종 |
| 관광특구 | 1.1% | 52.8억원 | 142개 | 고매출, 대규모 |

#### 상권 성장률 분포 (2021→2024)
| 분류 | 상권 수 | 비율 | 기준 |
|------|--------:|-----:|------|
| 성장 상권 | 739개 | 50.0% | 성장률 > +20% |
| 정체 상권 | 672개 | 45.4% | -20% ~ +20% |
| 쇠퇴 상권 | 68개 | 4.6% | 성장률 < -20% |

---

## 3. 데이터 전처리 전략 (Data Preparation)

### 3.1 전처리 파이프라인

```
[원본 데이터]
     │
     ▼
[1단계: 파생 변수 생성]
├── 기준_년_코드, 기준_분기_코드 추출
├── 성장률 = (매출_2024 - 매출_2021) / 매출_2021 × 100
├── 고매출_여부 = 매출 ≥ 75% 분위수 (7.4억원)
└── 성장_분류 = {성장, 정체, 쇠퇴}
     │
     ▼
[2단계: 변환 (Transformation)]
├── 로그 변환: 당월_매출_금액, 점포_수, 영역_면적
│   (왜도 69.8 → 0.09로 개선)
└── z-score 표준화: 군집 분석용 수치 변수
     │
     ▼
[3단계: 다중공선성 처리]
├── 점포_수 ↔ 유사_업종_점포_수 (r=0.999) → 하나만 선택
└── 총_상주인구_수 ↔ 지출_총금액 (r=0.918) → 하나만 선택
     │
     ▼
[4단계: 범주형 인코딩]
├── 상권_구분_코드 → 더미변수 (k-1 = 3개)
└── 서비스_업종_코드 → 더미변수 또는 타깃 인코딩
     │
     ▼
[최종 분석 데이터셋]
```

### 3.2 변수 선택 전략

#### 회귀/분류 모델용 설명 변수
| 카테고리 | 선택 변수 | 제외 변수 (사유) |
|----------|----------|-----------------|
| 점포 관련 | `점포_수`, `프랜차이즈_점포_수` | `유사_업종_점포_수` (다중공선성) |
| 인구 관련 | `총_유동인구_수`, `총_상주인구_수` | - |
| 소득 관련 | `월_평균_소득_금액` | `지출_총금액` (다중공선성) |
| 영역 관련 | `영역_면적` | - |
| 범주형 | `상권_구분_코드`, `서비스_업종_코드` | - |

#### 군집 분석용 변수 (상권 유형화)
| 변수 | 변동계수(CV) | 선택 이유 |
|------|------------:|----------|
| 점포_수 | 181.2% | 상권 규모 대표 |
| 총_유동인구_수 | 101.2% | 상권 활성도 |
| 영역_면적 | 113.8% | 물리적 규모 |
| 월_평균_소득_금액 | 25.5% | 구매력 지표 |

---

## 4. 분석 및 모델링 절차 (Modeling)

### 4.1 분석 프레임워크

```
┌─────────────────────────────────────────────────────────────────────┐
│                    Phase 1: 상권 유형화 (비지도학습)                    │
│  ┌─────────────────┐                                                │
│  │   k-means 군집   │ → 상권을 3~5개 유형으로 분류                     │
│  │   분석 수행      │   (성장형/안정형/쇠퇴형 등)                       │
│  └────────┬────────┘                                                │
│           │                                                         │
│           ▼                                                         │
│  ┌─────────────────┐                                                │
│  │  군집 특성 해석  │ → Centroid 분석, 프로파일링                      │
│  └────────┬────────┘                                                │
└───────────┼─────────────────────────────────────────────────────────┘
            │
            ▼
┌───────────┼─────────────────────────────────────────────────────────┐
│           │          Phase 2: 예측 모델링 (지도학습)                  │
│           ▼                                                         │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐  │
│  │  다중 회귀 분석  │    │  로지스틱 회귀  │    │  의사결정나무   │  │
│  │  (매출 예측)    │    │  (고매출 분류)  │    │  (규칙 도출)   │  │
│  └────────┬────────┘    └────────┬────────┘    └────────┬────────┘  │
│           │                      │                      │           │
│           └──────────────────────┼──────────────────────┘           │
│                                  ▼                                   │
│                     ┌─────────────────────┐                         │
│                     │   모델 비교 & 선택   │                         │
│                     │  (R², RMSE, AUC 등) │                         │
│                     └─────────────────────┘                         │
└─────────────────────────────────────────────────────────────────────┘
            │
            ▼
┌─────────────────────────────────────────────────────────────────────┐
│                 Phase 3: 업종별 최적 입지 분석                        │
│  ┌─────────────────┐                                                │
│  │  업종×상권유형   │ → 업종별 최고 매출 상권 유형 도출                 │
│  │  교차 분석      │                                                 │
│  └────────┬────────┘                                                │
│           │                                                         │
│           ▼                                                         │
│  ┌─────────────────┐                                                │
│  │  업종별 회귀    │ → 업종별 매출 영향 요인 차이 분석                 │
│  │  모델 비교      │   (상호작용 효과 포함)                           │
│  └─────────────────┘                                                │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.2 Phase 1: 상권 유형화 (k-means 군집 분석)

#### SPEC – 군집 분석 모듈

| 항목 | 내용 |
|------|------|
| **목적 (What & Why)** | 상권을 데이터 기반으로 유형화하여 성장형/안정형/쇠퇴형 등 분류. 이후 예측 모델의 피처 및 비즈니스 인사이트 기반 제공 |
| **입력 데이터** | 상권별 집계 데이터 (1,479개 상권 × 4개 변수) |
| **입력 변수** | 점포_수, 총_유동인구_수, 영역_면적, 월_평균_소득_금액 (모두 z-score 표준화) |
| **출력** | 각 상권의 군집 레이블 (0, 1, 2, ...), 군집별 Centroid |

**상세 절차**
1. 상권별 변수 집계 (최신 연도 기준 평균)
2. z-score 표준화 적용
3. Elbow Method로 최적 k 탐색 (k=2~10)
4. k-means 적합 (선택된 k)
5. 군집별 Centroid 해석 및 레이블링
6. 실루엣 스코어로 군집 품질 평가

**예외/엣지 케이스**
- 이상치 상권 → 별도 그룹 또는 제외 검토
- k 결정 모호 시 → 비즈니스 해석 용이성으로 결정

**검증 방법**
- 실루엣 스코어 > 0.3 목표
- 군집별 특성이 비즈니스적으로 해석 가능한지 확인

---

### 4.3 Phase 2: 예측 모델링

#### SPEC – 다중 회귀 분석 모듈 (매출 예측)

| 항목 | 내용 |
|------|------|
| **목적** | 상권 매출에 영향을 미치는 요인의 정량적 분석 |
| **입력 데이터** | 전체 데이터셋 (283,552건) |
| **타깃 변수 (Y)** | `log(당월_매출_금액)` - 로그 변환 |
| **설명 변수 (X)** | 점포_수(log), 총_유동인구_수(log), 총_상주인구_수, 월_평균_소득_금액, 영역_면적(log), 상권_구분_코드(더미), 서비스_업종_코드(더미) |
| **출력** | 회귀 계수(β), Adjusted R², 잔차 플롯 |

**상세 절차**
1. Train/Test 분할 (80:20)
2. 로그 변환 및 더미변수 생성
3. OLS 회귀 적합
4. 계수 유의성 검정 (p-value < 0.05)
5. 다중공선성 검토 (VIF < 10)
6. 잔차 분석 (정규성, 등분산성)
7. Test 데이터로 RMSE 계산

**해석 관점**
- β₁ = 0.3 → 점포 수 1% 증가 시 매출 0.3% 증가 (로그-로그 해석)
- 더미 계수 → 기준 범주 대비 매출 차이

**검증 방법**
- Adjusted R² (설명력)
- Test RMSE (예측 성능)
- 잔차 플롯 패턴 없음 확인

---

#### SPEC – 로지스틱 회귀 모듈 (고매출 분류)

| 항목 | 내용 |
|------|------|
| **목적** | 고매출 상권(상위 25%) 분류 및 요인 도출 |
| **타깃 변수 (Y)** | `고매출_여부` (1: 매출 ≥ 7.4억원, 0: 그 외) |
| **설명 변수 (X)** | 회귀 모델과 동일 |
| **출력** | 오즈비(OR), AUC, Confusion Matrix |

**상세 절차**
1. Train/Validation/Test 분할 (60:20:20)
2. 로지스틱 회귀 적합
3. 오즈비 계산 및 해석
4. Validation으로 최적 threshold 선택
5. Test로 최종 성능 평가

**해석 관점**
- OR = 1.5 → 해당 변수 1단위 증가 시 고매출 확률 1.5배

**검증 방법**
- AUC > 0.7 목표
- Confusion Matrix (Precision, Recall, F1)
- ROC 곡선 시각화

---

#### SPEC – 의사결정나무 모듈 (규칙 도출)

| 항목 | 내용 |
|------|------|
| **목적** | 고매출/성장 상권의 해석 가능한 규칙 도출 |
| **타깃 변수 (Y)** | `고매출_여부` 또는 `성장_분류` |
| **설명 변수 (X)** | 수치형 + 범주형 변수 (더미 변환 없이) |
| **출력** | 트리 구조, 분류 규칙, 변수 중요도 |

**상세 절차**
1. Train/Test 분할
2. 의사결정나무 적합 (Gini 또는 Entropy)
3. 가지치기(Pruning)로 과적합 방지
4. 트리 깊이 최적화 (CV 활용)
5. 규칙 추출 및 해석

**해석 예시**
```
IF 점포_수 > 20 AND 유동인구 > 150만 AND 상권유형 = 발달상권
THEN 고매출 확률 82%
```

**검증 방법**
- Test Accuracy
- 트리 깊이 vs 정확도 trade-off 확인
- 과적합 여부 (Train vs Test 성능 차이)

---

### 4.4 Phase 3: 업종별 최적 입지 분석

#### SPEC – 업종×상권 교차 분석 모듈

| 항목 | 내용 |
|------|------|
| **목적** | 각 업종에 최적화된 상권 유형 및 조건 도출 |
| **입력** | 업종-상권유형별 매출 집계 데이터 |
| **출력** | 업종별 최적 상권 유형 매핑 테이블 |

**상세 절차**
1. 업종×상권유형 피벗 테이블 생성
2. 업종별 최고 매출 상권 유형 도출
3. 업종별 회귀 모델 적합 (상호작용 효과)
4. 업종별 핵심 성공 요인 비교

**출력 예시**
| 업종 | 최적 상권 유형 | 핵심 성공 요인 |
|------|--------------|---------------|
| 한식음식점 | 관광특구 | 유동인구, 관광객 비율 |
| 미용실 | 골목상권 | 상주인구, 접근성 |
| 커피-음료 | 발달상권 | 점포 밀집도, 직장인 비율 |

---

## 5. 평가 전략 (Evaluation)

### 5.1 모델별 평가 지표

| 모델 | 평가 지표 | 목표 수준 |
|------|----------|----------|
| **k-means** | 실루엣 스코어 | > 0.3 |
| **다중 회귀** | Adjusted R², Test RMSE | R² > 0.3, RMSE 최소화 |
| **로지스틱 회귀** | AUC, F1-score | AUC > 0.7 |
| **의사결정나무** | Accuracy, 트리 해석성 | Accuracy > 0.7 |

### 5.2 모델 비교 프레임워크

| 비교 기준 | 다중 회귀 | 로지스틱 | 의사결정나무 |
|----------|:--------:|:--------:|:------------:|
| 예측 성능 | ○ | ○ | △ |
| 해석 가능성 | ○ | ○ | ◎ |
| 비선형 관계 | △ | △ | ◎ |
| 규칙 도출 | △ | △ | ◎ |
| 계수 해석 | ◎ | ◎ | △ |

### 5.3 비즈니스 관점 평가

- **ROI 추정 (가능 시)**
  - 예: "예측 모델 기반 입지 선정 시, 실패율 10%p 감소 예상"
- **한계점 명시**
  - 상관관계 ≠ 인과관계
  - 외부 변수(경기, 정책 등) 미반영
  - 예측 모델의 일반화 한계

---

## 6. 결과 해석 및 인사이트 도출 계획

### 6.1 예상 결과물

| 산출물 | 내용 | 활용 |
|--------|------|------|
| **상권 유형 지도** | 서울시 상권의 군집별 분포 시각화 | 정책 수립, 투자 의사결정 |
| **매출 영향 요인 순위** | 회귀 계수 기반 중요도 | 상권 활성화 전략 |
| **업종별 입지 가이드** | 업종-상권 최적 매칭 테이블 | 창업 컨설팅 |
| **고매출 규칙** | 의사결정나무 기반 조건 | 입지 체크리스트 |

### 6.2 비즈니스 시사점 도출 방향

```
[분석 결과] → [비즈니스 인사이트] → [의사결정 지원]

예시 1:
"점포 수가 매출에 양(+)의 영향"
→ "경쟁이 아닌 시너지 효과 존재"
→ "단독 입점보다 상권 내 집적 입지 추천"

예시 2:
"관광특구에서 의류업 매출 최고"
→ "관광객 대상 의류 판매 유망"
→ "의류업 창업 시 관광특구 우선 검토"

예시 3:
"쇠퇴 상권의 공통 특성: 낮은 유동인구, 고령화"
→ "유동인구 유입 정책 필요"
→ "지자체 상권 활성화 정책 제안"
```

---

## 7. 한계점 및 추가 분석 계획

### 7.1 현재 분석의 한계

| 한계 | 설명 | 완화 방안 |
|------|------|----------|
| **인과관계 한정** | 상관관계만 확인, 인과 추론 불가 | 시계열 분석, 자연실험 설계 고려 |
| **외생변수 미반영** | 경기, 정책, 계절성 등 | 추가 데이터 수집 (AdditionPlan) |
| **클래스 불균형** | 쇠퇴 상권 4.6%로 소수 | SMOTE, 가중치 조정 |
| **상권 경계 고정** | 상권 정의가 시점 고정 | 한계점으로 명시 |

### 7.2 향후 확장 분석 (AdditionPlan.md 연계)

1. **임대료 데이터 추가** → 수익성 분석 고도화
2. **공실률 데이터 추가** → 쇠퇴 지표 보강
3. **유동인구 시간대별 상세 분석** → 업종별 최적 영업시간 도출
4. **외부 이벤트 데이터** → 특수 효과 분석

---

## 8. 프로젝트 일정 및 역할 분담

### 8.1 단계별 일정 (예시)

| 단계 | 내용 | 예상 소요 |
|------|------|----------|
| Phase 1 | 데이터 전처리 + 군집 분석 | 2일 |
| Phase 2 | 예측 모델링 (회귀, 분류, 트리) | 3일 |
| Phase 3 | 업종별 분석 + 인사이트 도출 | 2일 |
| 시각화 | 대시보드/차트 제작 | 2일 |
| 발표 준비 | 슬라이드 작성 + 리허설 | 2일 |

### 8.2 산출물 체크리스트

- [ ] 전처리된 최종 분석 데이터셋
- [ ] 군집 분석 결과 (상권 유형 레이블)
- [ ] 회귀 분석 결과 (계수, R², 잔차 플롯)
- [ ] 분류 모델 결과 (AUC, Confusion Matrix, ROC)
- [ ] 의사결정나무 시각화 및 규칙
- [ ] 업종별 최적 입지 매핑 테이블
- [ ] 최종 발표 슬라이드

---

## 부록: 코드 구현 SPEC 요약

### A. 데이터 전처리 모듈
```python
# 파일: preprocessing.py
# 입력: 원본 CSV
# 출력: 전처리된 DataFrame
# 기능: 파생변수 생성, 로그변환, 표준화, 더미변수
```

### B. 군집 분석 모듈
```python
# 파일: clustering.py
# 입력: 상권별 집계 데이터
# 출력: 군집 레이블, 실루엣 스코어
# 기능: k-means, Elbow plot, Centroid 해석
```

### C. 예측 모델링 모듈
```python
# 파일: modeling.py
# 입력: 전처리된 데이터
# 출력: 모델 객체, 성능 지표
# 기능: OLS 회귀, 로지스틱 회귀, 의사결정나무
```

### D. 시각화 모듈
```python
# 파일: visualization.py
# 입력: 분석 결과
# 출력: 차트, 플롯
# 기능: 분포도, 상관행렬, 트리 시각화, 군집 플롯
```

---

*이 분석 계획서는 데이터의 실제 분포와 특성을 반영하여 작성되었습니다.*
*프로젝트 진행 중 데이터 탐색 결과에 따라 세부 사항이 조정될 수 있습니다.*

